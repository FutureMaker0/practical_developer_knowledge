# 데이터베이스와 효과적 활용

## 트랜잭션
  - 컴퓨터로 처리하는 논리적인 작업의 단위.
  - 트랜잭션에 속한 모든 작업이 성공적으로 완료되어야 트랜잭션이 완료되므로, 트랜잭션은 작업과 운명을 함께한다.

## 커밋과 롤백
  - 커밋: 약속하다 라는 뜻으로 여러 쿼리를 묶어 하나의 트랜잭션으로 처리하는 명령어
  - 롤백: 쿼리 실행 중 오류가 발생하면 상태를 되돌리기 위한 명령어

## 오토커밋의 해제에 관하여
  - 여러 개의 작업을 논리적으로 묶어야 하는 경우 오토커밋을 해제하는 것이 원치 않는 에러를 방지할 수 있는 방법이다.

## JDBC
  - Java DataBase Connectivivy
  - 자바 프로그램에서 데이터베이스를 연결하기 위해 사용
  - JDBC가 제공하는 다양한 API를 통해 자바 프로그램에서 디비로 접근하여 데이터를 읽거나 쓸 수 있다

## 인덱스
  - 디비에서 필요한 데이터를 빨리 찾도록 해주는 '자료구조'
  - 인덱스 key와 행 주소 row address에 대한 정보를 담고 있다
  - 키는 찾고자 하는 키워드를 말하고, 행 주소는 위치를 나타내는 정보이다

## 인덱스와 기본키의 관계
  - 기본키는 테이블에서 매우 중요한 정보이고, dbms는 기본키로 지정된 column에 인덱스를 자동으로 지정한다
  - 데이터 양이 많아지면 인덱스를 갖고 B-tree까지 활용하여 탐색 속도를 줄인다.

## 인덱스 지정 방법
  - 값이 중복되지 않고 유일한 열을 선택해야 하고, 인덱스를 잘 지정하면 검색 속도가 빨라진다.
  - 주소와 같이 고유하지만 너무 긴 문자열을 인덱스로 지정할 경우 인덱스에 저장되는 데이터의 크기가 커져 오히려 성능에 부담이 될 수 있다.

### 관계형 데이터베이스
  - 데이터를 테이블 형식으로 정리해서 관리하며 테이블 간의 관계를 중요하게 다루는 데이터베이스이다.
  - 여러 테이블을 만들어 데이터를 관리하고 테이블 간에 관계가 있다면 연결한다. 관계를 엮는데는 외래키(FK)를 사용한다.
  - 데이터가 형태가 정해져 있는 '정형 데이터'를 다루며, 데이터를 다루기 위해 여러 제약사항이 존재한다.
  - SQL을 사용하여 데이터를 추가, 수정, 조회, 삭제 등 편리하게 조작할 수 있다.
  - 테이블의 행을 중심으로 데이터를 읽고 쓰는 행 지향 데이터베이스(row-oriented database)와 열 지향 데이터베이스(column-oriented database)가 있다.
    - 데이터베이스와 하드디스크는 서로의 역할에서 밀접한 관계를 가진다.
    - Row-Oriented: 데이터를 빈번하게 추가하거나 업데이트하는 애플리케이션 개발 시 사용한다.
    - Column-Oriented: 대표적으로 빅데이터 분석용 애플리케이션 개발 시 사용한다. 특정 열의 데이터를 분석하기 때문에 열 지향 디비를 사용하는 것이다.
  - OLTP와 OLAP
    - OLTP(OnLine Transaction Processing): 인터넷 뱅킹, 온라인 쇼핑 등과 같이 실시간 트랜잭션 처리를 지원하는 시스템.
    - OLAP(OnLine Analytical Processing): 온라인 분석 처리를 의미하며 데이터를 분석하는 시스템.
  - SSD와 HDD
    - SSD(Solid State Disk): 반도체를 이용하는 저장장치
    - HDD(Hard Disk): 열 지향이냐 행 지향이냐에 따라 데이터 저장 방식이 달라지고 데이터를 가져오는 속도에 차이가 발생한다.
   
### Key-Value 데이터베이스
  - 데이터를 키와 값으로 저장하는 형태인데, 저장 구조가 단순해서 여러 서버에 나누어 데이터를 저장하고 처리할 수 있다는 장점이 있다.
  - 고사양 하드웨어를 요구하지 않기 때문에 구축 비용이 저렴하고, 서버의 수평 확장(scale out)에 한계가 없으며 성능 부하 발생 시 언제든 서버를 추가하여 유연한 대응 가능 장점.
  - 마구 늘일 수 있지만 데이터 일관성을 유지하는데 한계가 있다. 그러므로 이 방식은 일시적 비일관성을 허용하는 서비스에 적합하다.
  - 단순한 데이터를 처리할 때 효율이 매우 높다.(SNS 게시글, 커머스 장바구니, 사용자 세션 정보 등 관계성이 적은 데이터를 저장할 떄 주로 사용한다.
  - Redis, DynamoDB, Memcached 등이 대표적이다.

> NoSQL(Not-Only SQL)? 관계형 데이터베이스가 아닌 다른 종류의 데이터베이스의 총칭이며, SQL을 사용하지 않는 다양한 데이터베이스가 속한다.

### 문서 기반 데이터베이스
  - 데이터가 문서 안에 키-값의 형태로 존재하며, 문서 단위로 데이터를 처리한다는 점에서 일반적인 Key-Value와 차이점이 있다.
    ```json
    // 문서 기반 데이터베이스 JSON 예시
    {
      "id": "id1",
      "name": "name1",
      "address": {
        "country": "korea",
        "city": "seoul"
      }
    }
    ```
  - 문서마다 동일한 키를 가지지 않아도 되며, 필드에 들어가는 데이터의 형태도 고정되지 않고 자유롭다.
  - address를 별도의 테이블로 만들어야하는 관계형 데이터베이스와는 다르게, 문서 기반 디비는 그럴 필요도 없다. 테이블 간의 조인을 통한 조인이 필요 없으므로 조회 속도가 빠르다.
  - 그러나 자유롭고 제약 없이 데이터를 저장하는 반면, 동일한 데이터가 중복되는 상황에서 값이 일치하지 않는 데이터 일관성에 문제가 생길 수 있다는 단점이 있다. 그렇기 때문에 데이터를
    수정하려면 여러 문서를 모두 만져줘야하기 때문에 업데이트를 필요로 하는 기능보다는 주로 단순 조회가 목적인 프로그램에서 사용한다.
  - 문서의 형태는 JSON, XML, BSON 등을 사용할 수 있다.
  - MongoDB, CouchDB, DynamoDB 등이 대표적이다.
      
